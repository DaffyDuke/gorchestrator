<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>Gorchestrator by owulveryck</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Gorchestrator</h1>
        <h2>Orchestrator as a Service - A RESTful Concurrent orchestrator in GO</h2>

        <section id="downloads">
          <a href="https://github.com/owulveryck/gorchestrator/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/owulveryck/gorchestrator/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/owulveryck/gorchestrator" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <p><a href="https://travis-ci.org/owulveryck/gorchestrator"><img src="https://travis-ci.org/owulveryck/gorchestrator.svg?branch=master" alt="Build Status"></a></p>

<h1>
<a id="abstract" class="anchor" href="#abstract" aria-hidden="true"><span class="octicon octicon-link"></span></a>Abstract</h1>

<p>A simple orchestrator that takes and adjacency matrix as input.</p>

<p>This orchestrator acts as a webservice.
This means that you send a representation of your graph and nodes via an HTTP POST request to the engine, and:</p>

<ul>
<li>It decomposes the workflow</li>
<li>Launch as many "processes" (actually goroutines) as nodes (see performances)</li>
<li>Launch a conductor that acts as a communication vector for the running nodes</li>
</ul>

<p>OaaS is micro service oriented. Which means that it does not actually run the artifact of the node. Instead, It calls another web service that acts as a proxy for the execution task. The proxy may implement drivers as needed, such as a <code>shell</code> driver, an <code>ansible</code> driver, <code>docker</code>, ...</p>

<p>The concurrency is implemented thanks to go routines (See this <a href="http://blog.owulveryck.info/2015/12/02/orchestrate-a-digraph-with-goroutine-a-concurrent-orchestrator/">post</a> for more information about the implementation)</p>

<h1>
<a id="architecture" class="anchor" href="#architecture" aria-hidden="true"><span class="octicon octicon-link"></span></a>Architecture</h1>

<h2>
<a id="orchestrator" class="anchor" href="#orchestrator" aria-hidden="true"><span class="octicon octicon-link"></span></a>orchestrator</h2>

<p>The orchestrator is the main web service. It is a cloud native, stateless application. Its goal is simply to orchestrate/schedule the tasks so they are executed concurently in the correct order.</p>

<h2>
<a id="executors" class="anchor" href="#executors" aria-hidden="true"><span class="octicon octicon-link"></span></a>executor(s)</h2>

<p>The executor is a web service that actually executes a task.</p>

<h2>
<a id="the-gorch" class="anchor" href="#the-gorch" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Gorch</h2>

<p><code>gorch</code> is the Graphical-Orchestration representation.</p>

<p>It is a JSON representation of the graph.</p>

<p>It is composed of and adjaceny matrix and a list of nodes.</p>

<div class="highlight highlight-source-json"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>state<span class="pl-pds">"</span></span>: <span class="pl-c1">0</span>,
    <span class="pl-s"><span class="pl-pds">"</span>digraph<span class="pl-pds">"</span></span>: [
        <span class="pl-c1">0</span>
    ],
    <span class="pl-s"><span class="pl-pds">"</span>nodes<span class="pl-pds">"</span></span>: [
        {
            <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-c1">0</span>,
            <span class="pl-s"><span class="pl-pds">"</span>state<span class="pl-pds">"</span></span>: <span class="pl-c1">0</span>,
            <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>engine<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>artifact<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>args<span class="pl-pds">"</span></span>: [
                <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>
            ]
        }
    ]

}</pre></div>

<h1>
<a id="getting-it-up-and-running" class="anchor" href="#getting-it-up-and-running" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting it up and running</h1>

<p>The engine is written in pure go. The package is go-gettable. Assuming you have a GO environment up and running, the following tasks should be enough to enjoy the orchestrator:</p>

<ul>
<li><code>go get github.com/owulveryck/gorchestrator</code></li>
<li><code>cd $GOPATH/src/github.com/owulveryck/gorchestrator</code></li>
<li><code>go run</code></li>
</ul>

<p>Then you can post a query as described in the example folder:</p>

<div class="highlight highlight-source-shell"><pre><span class="pl-c"># curl -X POST -H 'Content-Type:application/json' -H 'Accept:application/json' -d @example.json -k http://localhost:8080/v1/tasks</span></pre></div>

<h1>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h1>

<p>The REST API is in developement but nearly stable. It is self documented with swagger. </p>

<h2>
<a id="apidoc" class="anchor" href="#apidoc" aria-hidden="true"><span class="octicon octicon-link"></span></a>Apidoc</h2>

<p>The api doc is viewable</p>

<ul>
<li>live <a href="http://blog.owulveryck.info/gorchestrator/swagger/">here</a> for api documentation.</li>
<li>In your own instance at <a href="http://localhost:8080/apidocs/">http://localhost:8080/apidocs/</a>
</li>
</ul>

<h1>
<a id="clients" class="anchor" href="#clients" aria-hidden="true"><span class="octicon octicon-link"></span></a>Clients</h1>

<h2>
<a id="webclient" class="anchor" href="#webclient" aria-hidden="true"><span class="octicon octicon-link"></span></a>Webclient</h2>

<p>A web client is in development, see <em>clients/web</em> for the sources:
<img src="https://raw.githubusercontent.com/owulveryck/gorchestrator/master/Documentation/images/webclient.png" alt="Screenshot"></p>

<h2>
<a id="tosca-client" class="anchor" href="#tosca-client" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tosca client</h2>

<p>A tosca client using the <a href="https://github.com/owulveryck/toscalib">toscalib</a> is present in <em>clients/tosca</em>.
It converts a TOSCA execution plan into a <em>gorch</em> representation.</p>
      </section>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-69673850-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
